<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration Form</title>

    <!-- link to css -->
    <link rel="stylesheet" href="style.css">

</head>
<body>
    <div class="container" id="container">

        <form id="myform" action="#">

            <h1>Registration Form</h1>
            <p>Please enter Your Details</p>

            <hr>

            <label for="name"><b>User Name</b></label>
            <input type="text" placeholder="Enter your Username" name="name" id="name" required/>

            <label for="email"><b>Email</b></label>
            <input type="email" placeholder="Enter Your Email id" name="email" id="email" required/>

            <label for="psw"><b>Password</b></label>
            <input type="password" placeholder="Enter Your Password" name="psw" id="psw" required/>

            <label for="cpsw"><b>Confirm Password</b></label>
            <input type="password" placeholder="Retype Your Password" name="cpsw" id="cpsw" required/>

            <hr>

            <button value="button" onclick="saveData()" class="RegButton" id="btn" [disabled]="!form.form.valid" >Submit</button>

        </form>
    </div>


    <script>
        function saveData(){
            

            let name,email,psw,cpsw;
            name=document.getElementById("name").value;
            email=document.getElementById("email").value;
            psw=document.getElementById("psw").value;
            cpsw=document.getElementById("cpsw").value;

            let user_records=new Array();    
            user_records=JSON.parse(localStorage.getItem("users"))?JSON.parse(localStorage.getItem("users")):[]
            if(psw!=cpsw ){
                alert("Password not Matching")
            }
            else{ 
                    if(user_records.some((v)=>{return v.email==email}))
                    {
                        alert("Email already used");
                    }
                    else{ user_records.push({
                        "name":name,
                        "email":email,
                        "psw":psw,
                        "cpsw":cpsw
                        })
                    }
                }

            localStorage.setItem("users",JSON.stringify(user_records));
        
        }
            
        
        
    </script>   
        


</body>
</html>
